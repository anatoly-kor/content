---
title: "Как войти в Vim"
description: "Введение в vim. Основные принципы работы в vim."
authors:
  - anatoly-kor
tags:
  - article
keywords:
  - vim
  - инструменты
  - linux
---

# Кратко
[Vim](https://www.vim.org/) - сложный, но очень интересный инструмент. Он позволяет сильно ускорить вашу работу с текстом. В этой статье познакомимся с общими принципами работы в vim, изучим режимы работы, посмотрим на некоторые команды и их поведение.

Горячие клавиши есть в любом IDE, но vim можно использовать в любом редакторе, что снимает с вас необходимость изучения шорткатов.

# Как войти в vim

![wq](images/wq.JPG)

Все мы с вами сталкиваемся с vim: при создании коммита или при работе на удалённом сервере. Однако, мало кто задумывался почему этот инструмент настолько популярен. Его поклонники до сих пор существуют и продвигают vim в массы.

## Общая концепция vim

Основная идея vim заключается в том, что редактирование текста (в нашем случае кода) более сложная задача чем его создание. С нуля писать просто — сосредоточился и тыкаешь правильные кнопочки в правильной последовательности. А для редактирования нужно понять, куда вносить правки, навести мышь на эту часть кода, начать удалять буквы удерживая Backspace, и только после этого можно будет вводить другой код. Повторить до успешного результата.

Однако перемещение и редактирование может происходить гораздо быстрее в случае, если не придётся трогать мышь или трекпад. Подумал и бац, уже редактируешь код в правильном месте. Магия вне Хогвартса — не иначе.

### Принцип команд в vim

Большинство команд при работе в vim это обычные глаголы и существительные в английском языке.

- удалить слово - delete word - <kbd>dw</kbd>
- заменить два слова - change 2 word - <kbd>c2w</kbd>
- ввести текст - insert - <kbd>i</kbd>
- удалить все в скобках - delete inside ( - <kbd>di(</kbd>

Иногда важно расположение курсора для той или иной команды. Например, если курсор находится в середине слова, то <kbd>dw</kbd> отработает не совсем ожидаемо: удалится часть слова после курсора _включая букву под курсором_. Чтобы достичь желаемого поведения, достаточно вспомнить, что мы находимся в середине слова и поэтому нам понадобиться команда <kbd>diw</kbd>.

![diw_di](video/diw-di.mp4)

## hjkl

Клавиши <kbd>h</kbd><kbd>j</kbd><kbd>k</kbd><kbd>l</kbd> — это основные команды для движения по открытому файлу в визуальном режиме (подробнее о режимах vim поговорим ниже). Использование именно этих клавиш это историческая особенность. Когда [Билл Джой](https://ru.wikipedia.org/wiki/Джой,_Билл) создавал редактор vi, стрелочки на его машине [ADM-3](https://ru.wikipedia.org/wiki/ADM-3) были именно на этих кнопках.

- h - ←
- j - ↓
- k - ↑
- l - →

![ADM_KB](images/ADM3-KB.svg)

## Режимы vim

Существует 5 основных режимов для работы в vim. Большая часть из них создана для редактирования текста тем или иным способом.

- normal — обычный режим. Позволяет перемещаться по файлу используя кнопки, которые мы изучили ранее;
- <kbd>i</kbd> — _insert_, режим ввода текста;
- <kbd>v</kbd> — _visual_, режим выделения текста;
- <kbd>:</kbd> — _command_, режим ввода команд bash;
- <kbd>R</kbd> — _replace_, режим замены текста **перед** курсором.

<kbd>Esc</kbd> - выйти из любого режима и вернуться в normal режим.

![rewrite](video/rewrite.mp4)

## Undo-Redo

Все мы совершаем ошибки и хотим их изменить. В vim это возможно одним движением.

Для отмены последнего редактирования используется кнопка <kbd>u</kbd> (undo). Для отмены отмены редактирования <kbd>Ctrl r</kbd> (redo).

## Как все же выйти из vim?

Как было сказано ранее, все в vim это глаголы и существительные английского языка. Сохранение и выход не исключение.
Эти операции совершаются в режиме команд. Войти в этот режим можно через кнопку <kbd>:</kbd>.

- <kbd>w</kbd> — write, сохранить;
- <kbd>q</kbd> — quit, выйти;
- <kbd>q!</kbd> — выйти без сохранения изменений;
- <kbd>wq</kbd> — выйти и сохранить.

## Передвижение в vim

Передвигаться в vim можно очень быстро. За пару комбинаций можно перепрыгнуть на место в коде о котором вы подумали и тут же начать его редактировать. Все комбинации работают в режимах normal и visual.

### Прыгаем по словам

- если слово **не** содержит пунктуационный знак в конце:
  - переместить курсор _вперёд_ на начало следующего слова - <kbd>w</kbd>
  - переместить курсор _вперёд_ на конец слова - <kbd>e</kbd>
  - переместить курсор _назад_ на начало слова - <kbd>b</kbd>

- если слово содержит пунктуационный знак в конце:
  - курсор _вперёд_ на начало следующего слова - <kbd>W</kbd>
  - курсор _вперёд_ на конец слова - <kbd>E</kbd>
  - курсор _назад_ на начало слова - <kbd>B</kbd>

### Начало и конец строки

- в _начало_ строки — <kbd>0</kbd>
- в _начало_ строка на первый **не** пробельный символ — <kbd>^</kbd>
- в _конец_ строки — <kbd>$</kbd>

### Начало и конец файла

- в самое начало файла — <kbd>gg</kbd>
- в конец файла — <kbd>G</kbd>

### Перейти на конкретную строку

- перейти на строку 32 — <kbd>:32</kbd>

### Поиск по слову

- найти слово param — <kbd>/param</kbd>

Если совпадений несколько в файле, то переход к следующему совпадению — <kbd>n</kbd> (next). К предыдущему <kbd>N</kbd>.

### Передвижения курсора по экрану

- _вверх_ на половину экрана — <kbd>Ctrl u</kbd>
- _вверх_ на _весь_ экран — <kbd>Ctrl b</kbd>
- _вниз_ на половину экрана — <kbd>Ctrl d</kbd>
- _вниз_ на _весь_ экран — <kbd>Ctrl f</kbd>

По моему мнению использование этих клавиш для быстрого перемещения по странице не очень удобно так как, теряется текст из-за скорости. VIM слишком быстрый, мозг не успевает отследить столь быстрое перемещение. Есть вариант более медленный и проще отслеживаемый мозгом.

- _вверх_ к следующей пустой строке — <kbd>{</kbd>
- _вниз_ к следующей пустой строке — <kbd>}</kbd>
- вернутся к прошлому месту курсора — <kbd>Ctrl o</kbd>
- обратное команде выше, к прошлому месту курсора — <kbd>Ctrl i</kbd>

## Заключение

Это был краткий экскурс в vim. На текущий момент этот инструмент остаётся по прежнему очень мощным. Дело не только в быстром редактировании или моментальному передвижении по файлу, но и то что, vim - довольно просто превратить из редактора в полноценную IDE, заточенную конкретно под ваши нужды.

## Практика

.dotfiles — инструмент, позволяющий вам создать шаблон для ваших инструментов и развернуть его на любой машине, будь то рабочая или сервер или новый персональный компьютер.

Всего 3 команды и ваше привычное окружение там где вы пожелаете.

1. `git clone <dotfile github repo url>`
2. `cd dotfiles`
3. `./install`

С примером конфигурации vim, tmux, скриптов вы можете ознакомиться в моем [.dotfiles](https://github.com/anatoly-kor/dotfiles). Он довольно обширный, но разделён на логическиe части. Подглядывайте и копируйте себе полезные для вас команды и инструменты.

![example](video/example.mp4)
